<!DOCTYPE html>
<html>
  <head>
    <title>Mapping Greek Lyric: Places, Travel, Geographical Imaginary</title>

    <link type="text/css" rel="stylesheet" href="orbis.css" />
    <link type="text/css" rel="stylesheet" href="lyricmapping.css" />
    <link type="text/css" rel="stylesheet" href="chosen.min.css" />
    <link rel="stylesheet" href="css/iThing.css" type="text/css" />
    <link href='http://fonts.googleapis.com/css?family=Gentium+Basic:400,700' rel='stylesheet' type='text/css'>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    
    <link rel="shortcut icon" href="http://cartodb.com/assets/favicon.ico" />
    <link rel="stylesheet" href="http://libs.cartocdn.com/cartodb.js/v3/themes/css/cartodb.css" />
    <!--[if lte IE 8]>
      <link rel="stylesheet" href="http://libs.cartocdn.com/cartodb.js/v3/themes/css/cartodb.ie.css" />
    <![endif]-->
    
</head>
  
<body>
  
  <div id="map"></div>

  <div class="controlsDiv" id="controlbar">
    <div id="controlbarScroller";>
      
    <div id="modeSelection">
      <div class="mainlinksDiv" >
		<a class="mainlinks" href="bubblemap.html?visited=1">PLACES</a>
      </div>
      <div class="mainlinksDiv">
		<a style="border-bottom: 4px solid; border-bottom-color: #c72f2a;" class="mainlinks" href="linemap.html">TRAVEL</a>
      </div>
      <div class="mainlinksDiv" style="-webkit-box-flex: 2; -moz-box-flex: 2; -webkit-flex: 2; -ms-flex: 2; flex: 2;">
		<a class="mainlinks" href="imaginary.html">GEOGRAPHICAL IMAGINARY</a>
      </div>
    </div>
	
    <div class="buttonContainer" style="background: rgba(255,255,255,0);">            
      <fieldset style="border: none;" id="genreForm" class="genreForm">
        <div style="color:black;padding-right:5px;display: inline-block;margin-top: 3px; font-weight: bold;" >TRAVEL</div>
        <input type="radio" value="relationship_1" name="city" id="relationship_1">
        <label for="relationship_1" class="priority-picker-label">ALL TRAVEL</label>		
      </fieldset>
    </div>
      
    <div class="buttonContainer" style="background: rgba(255,255,255,0); height: 100px;">            
      <fieldset style="border: none;" id="cityForm" class="priorityForm">
        <div style="color:black;padding-right:5px;display: inline-block;margin-top: 3px; font-weight: bold;" >POET: </div>
		
		<input type="radio" value="0" name="city" id="poet_92">
		<label for="poet_92" class="instrument-picker-label">Alcaeus</label>

		<input type="radio" value="0" name="city" id="poet_93">
		<label for="poet_93" class="instrument-picker-label">Alcman</label>

		<input type="radio" value="0" name="city" id="poet_94">
		<label for="poet_94" class="instrument-picker-label">Anacreon</label>

		<input type="radio" value="0" name="city" id="poet_97">
		<label for="poet_97" class="instrument-picker-label">Archilochus</label>

		<input type="radio" value="0" name="city" id="poet_98">
		<label for="poet_98" class="instrument-picker-label">Arion</label>

		<input type="radio" value="0" name="city" id="poet_23">
		<label for="poet_23" class="instrument-picker-label">Ariphron</label>

		<input type="radio" value="0" name="city" id="poet_100">
		<label for="poet_100" class="instrument-picker-label">Bacchylides</label>

		<input type="radio" value="0" name="city" id="poet_11">
		<label for="poet_11" class="instrument-picker-label">Bakkhiadas</label>

		<input type="radio" value="0" name="city" id="poet_101">
		<label for="poet_101" class="instrument-picker-label">Callinus</label>

		<input type="radio" value="0" name="city" id="poet_104">
		<label for="poet_104" class="instrument-picker-label">Corinna</label>

		<input type="radio" value="0" name="city" id="poet_107">
		<label for="poet_107" class="instrument-picker-label">Demodocus</label>

		<input type="radio" value="0" name="city" id="poet_59">
		<label for="poet_59" class="instrument-picker-label">Diagoras</label>

		<input type="radio" value="0" name="city" id="poet_109">
		<label for="poet_109" class="instrument-picker-label">Dionysius Chalkus</label>

		<input type="radio" value="0" name="city" id="poet_111">
		<label for="poet_111" class="instrument-picker-label">Echembrotus</label>

		<input type="radio" value="0" name="city" id="poet_43">
		<label for="poet_43" class="instrument-picker-label">Euangelos</label>

		<input type="radio" value="0" name="city" id="poet_65">
		<label for="poet_65" class="instrument-picker-label">Euenos</label>

		<input type="radio" value="0" name="city" id="poet_112">
		<label for="poet_112" class="instrument-picker-label">Eumelos of Corinth</label>

		<input type="radio" value="0" name="city" id="poet_44">
		<label for="poet_44" class="instrument-picker-label">Eumelos of Elis</label>

		<input type="radio" value="0" name="city" id="poet_114">
		<label for="poet_114" class="instrument-picker-label">Euripides</label>

		<input type="radio" value="0" name="city" id="poet_115">
		<label for="poet_115" class="instrument-picker-label">Hermippus</label>

		<input type="radio" value="0" name="city" id="poet_71">
		<label for="poet_71" class="instrument-picker-label">Hippias</label>

		<input type="radio" value="0" name="city" id="poet_116">
		<label for="poet_116" class="instrument-picker-label">Hipponax</label>

		<input type="radio" value="0" name="city" id="poet_117">
		<label for="poet_117" class="instrument-picker-label">Ibycus</label>

		<input type="radio" value="0" name="city" id="poet_55">
		<label for="poet_55" class="instrument-picker-label">Ion of Chios</label>

		<input type="radio" value="0" name="city" id="poet_72">
		<label for="poet_72" class="instrument-picker-label">Ion of Samos</label>

		<input type="radio" value="0" name="city" id="poet_51">
		<label for="poet_51" class="instrument-picker-label">Khairis</label>

		<input type="radio" value="0" name="city" id="poet_20">
		<label for="poet_20" class="instrument-picker-label">Krateuas</label>

		<input type="radio" value="0" name="city" id="poet_120">
		<label for="poet_120" class="instrument-picker-label">Lamprus</label>

		<input type="radio" value="0" name="city" id="poet_121">
		<label for="poet_121" class="instrument-picker-label">Lasus</label>

		<input type="radio" value="0" name="city" id="poet_3">
		<label for="poet_3" class="instrument-picker-label">Licymnius</label>

		<input type="radio" value="0" name="city" id="poet_52">
		<label for="poet_52" class="instrument-picker-label">Magnes</label>

		<input type="radio" value="0" name="city" id="poet_153">
		<label for="poet_153" class="instrument-picker-label">Melampus</label>

		<input type="radio" value="0" name="city" id="poet_158">
		<label for="poet_158" class="instrument-picker-label">Melanippides</label>

		<input type="radio" value="0" name="city" id="poet_156">
		<label for="poet_156" class="instrument-picker-label">Meletos</label>

		<input type="radio" value="0" name="city" id="poet_49">
		<label for="poet_49" class="instrument-picker-label">Moskhos</label>

		<input type="radio" value="0" name="city" id="poet_126">
		<label for="poet_126" class="instrument-picker-label">Philiadas</label>

		<input type="radio" value="0" name="city" id="poet_24">
		<label for="poet_24" class="instrument-picker-label">Philoxenus of Cythera</label>

		<input type="radio" value="0" name="city" id="poet_5">
		<label for="poet_5" class="instrument-picker-label">Phrynis</label>

		<input type="radio" value="0" name="city" id="poet_149">
		<label for="poet_149" class="instrument-picker-label">Pindar</label>

		<input type="radio" value="0" name="city" id="poet_26">
		<label for="poet_26" class="instrument-picker-label">Polyidus</label>

		<input type="radio" value="0" name="city" id="poet_128">
		<label for="poet_128" class="instrument-picker-label">Polymnestus</label>

		<input type="radio" value="0" name="city" id="poet_129">
		<label for="poet_129" class="instrument-picker-label">Pratinas</label>

		<input type="radio" value="0" name="city" id="poet_2">
		<label for="poet_2" class="instrument-picker-label">Pronomus</label>

		<input type="radio" value="0" name="city" id="poet_131">
		<label for="poet_131" class="instrument-picker-label">Sacadas</label>

		<input type="radio" value="0" name="city" id="poet_132">
		<label for="poet_132" class="instrument-picker-label">Sappho</label>

		<input type="radio" value="0" name="city" id="poet_134">
		<label for="poet_134" class="instrument-picker-label">Semonides</label>

		<input type="radio" value="0" name="city" id="poet_135">
		<label for="poet_135" class="instrument-picker-label">Simonides</label>

		<input type="radio" value="0" name="city" id="poet_136">
		<label for="poet_136" class="instrument-picker-label">Solon</label>

		<input type="radio" value="0" name="city" id="poet_137">
		<label for="poet_137" class="instrument-picker-label">Sophocles</label>

		<input type="radio" value="0" name="city" id="poet_138">
		<label for="poet_138" class="instrument-picker-label">Stesichorus</label>

		<input type="radio" value="0" name="city" id="poet_139">
		<label for="poet_139" class="instrument-picker-label">Susarion</label>

		<input type="radio" value="0" name="city" id="poet_7">
		<label for="poet_7" class="instrument-picker-label">Telestes</label>

		<input type="radio" value="0" name="city" id="poet_141">
		<label for="poet_141" class="instrument-picker-label">Terpander</label>

		<input type="radio" value="0" name="city" id="poet_142">
		<label for="poet_142" class="instrument-picker-label">Thaletas</label>

		<input type="radio" value="0" name="city" id="poet_45">
		<label for="poet_45" class="instrument-picker-label">Thespis</label>

		<input type="radio" value="0" name="city" id="poet_144">
		<label for="poet_144" class="instrument-picker-label">Timocreon</label>

		<input type="radio" value="0" name="city" id="poet_6">
		<label for="poet_6" class="instrument-picker-label">Timotheus</label>

		<input type="radio" value="0" name="city" id="poet_145">
		<label for="poet_145" class="instrument-picker-label">Tyrtaeus</label>

		<input type="radio" value="0" name="city" id="poet_155">
		<label for="poet_155" class="instrument-picker-label">Xenocritus</label>

		<input type="radio" value="0" name="city" id="poet_154">
		<label for="poet_154" class="instrument-picker-label">Xenodamus</label>

		<input type="radio" value="0" name="city" id="poet_148">
		<label for="poet_148" class="instrument-picker-label">Xenophanes</label>

		<input type="radio" value="0" name="city" id="poet_18">
		<label for="poet_18" class="instrument-picker-label">-es</label>
      </fieldset>
    </div>
    
    <div class="buttonContainer" style="background: rgba(255,255,255,0); height: 100px;">            
      <fieldset style="border: none;" id="instrumentForm" class="instrumentForm">
        <div style="color:black;padding-right:5px;display: inline-block;margin-top: 3px; font-weight: bold;" >PLACES (<span style="color: #fc1804;">to</span>/<span style="color: #551A8B;">from</span>): </div>
		<input type="radio" value="0" name="city" id="destination_65">
		<label for="destination_65" class="instrument-picker-label">Abdera</label>

		<input type="radio" value="0" name="city" id="destination_79">
		<label for="destination_79" class="instrument-picker-label">Akragas</label>

		<input type="radio" value="0" name="city" id="destination_77">
		<label for="destination_77" class="instrument-picker-label">Amorgos</label>

		<input type="radio" value="0" name="city" id="destination_59">
		<label for="destination_59" class="instrument-picker-label">Antissa</label>

		<input type="radio" value="0" name="city" id="destination_54">
		<label for="destination_54" class="instrument-picker-label">Arcadia</label>

		<input type="radio" value="0" name="city" id="destination_38">
		<label for="destination_38" class="instrument-picker-label">Argos</label>

		<input type="radio" value="0" name="city" id="destination_248">
		<label for="destination_248" class="instrument-picker-label">Arne</label>

		<input type="radio" value="0" name="city" id="destination_2">
		<label for="destination_2" class="instrument-picker-label">Athens</label>

		<input type="radio" value="0" name="city" id="destination_250">
		<label for="destination_250" class="instrument-picker-label">Cephallenia</label>

		<input type="radio" value="0" name="city" id="destination_4">
		<label for="destination_4" class="instrument-picker-label">Chalcis</label>

		<input type="radio" value="0" name="city" id="destination_6">
		<label for="destination_6" class="instrument-picker-label">Chios</label>

		<input type="radio" value="0" name="city" id="destination_75">
		<label for="destination_75" class="instrument-picker-label">Clazomenae</label>

		<input type="radio" value="0" name="city" id="destination_20">
		<label for="destination_20" class="instrument-picker-label">Colophon</label>

		<input type="radio" value="0" name="city" id="destination_48">
		<label for="destination_48" class="instrument-picker-label">Corinth</label>

		<input type="radio" value="0" name="city" id="destination_247">
		<label for="destination_247" class="instrument-picker-label">Cyme</label>

		<input type="radio" value="0" name="city" id="destination_35">
		<label for="destination_35" class="instrument-picker-label">Cythera</label>

		<input type="radio" value="0" name="city" id="destination_5">
		<label for="destination_5" class="instrument-picker-label">Delos</label>

		<input type="radio" value="0" name="city" id="destination_30">
		<label for="destination_30" class="instrument-picker-label">Delphi</label>

		<input type="radio" value="0" name="city" id="destination_91">
		<label for="destination_91" class="instrument-picker-label">Egypt
</label>

		<input type="radio" value="0" name="city" id="destination_32">
		<label for="destination_32" class="instrument-picker-label">Elis</label>

		<input type="radio" value="0" name="city" id="destination_11">
		<label for="destination_11" class="instrument-picker-label">Ephesus</label>

		<input type="radio" value="0" name="city" id="destination_56">
		<label for="destination_56" class="instrument-picker-label">Eresos</label>

		<input type="radio" value="0" name="city" id="destination_50">
		<label for="destination_50" class="instrument-picker-label">Erythrae</label>

		<input type="radio" value="0" name="city" id="destination_78">
		<label for="destination_78" class="instrument-picker-label">Gela</label>

		<input type="radio" value="0" name="city" id="destination_60">
		<label for="destination_60" class="instrument-picker-label">Gortyn</label>

		<input type="radio" value="0" name="city" id="destination_16">
		<label for="destination_16" class="instrument-picker-label">Helicon</label>

		<input type="radio" value="0" name="city" id="destination_74">
		<label for="destination_74" class="instrument-picker-label">Heracleia Trachinia</label>

		<input type="radio" value="0" name="city" id="destination_31">
		<label for="destination_31" class="instrument-picker-label">Hermione</label>

		<input type="radio" value="0" name="city" id="destination_23">
		<label for="destination_23" class="instrument-picker-label">Himera</label>

		<input type="radio" value="0" name="city" id="destination_73">
		<label for="destination_73" class="instrument-picker-label">Ikaros</label>

		<input type="radio" value="0" name="city" id="destination_46">
		<label for="destination_46" class="instrument-picker-label">Ioulis (Ceos)</label>

		<input type="radio" value="0" name="city" id="destination_29">
		<label for="destination_29" class="instrument-picker-label">Isthmia</label>

		<input type="radio" value="0" name="city" id="destination_92">
		<label for="destination_92" class="instrument-picker-label">Italy
</label>

		<input type="radio" value="0" name="city" id="destination_64">
		<label for="destination_64" class="instrument-picker-label">Katane</label>

		<input type="radio" value="0" name="city" id="destination_81">
		<label for="destination_81" class="instrument-picker-label">Krannon</label>

		<input type="radio" value="0" name="city" id="destination_86">
		<label for="destination_86" class="instrument-picker-label">Kynoskephalai</label>

		<input type="radio" value="0" name="city" id="destination_7">
		<label for="destination_7" class="instrument-picker-label">Leontini</label>

		<input type="radio" value="0" name="city" id="destination_47">
		<label for="destination_47" class="instrument-picker-label">Leros</label>

		<input type="radio" value="0" name="city" id="destination_21">
		<label for="destination_21" class="instrument-picker-label">Leucas</label>

		<input type="radio" value="0" name="city" id="destination_14">
		<label for="destination_14" class="instrument-picker-label">Locri</label>

		<input type="radio" value="0" name="city" id="destination_84">
		<label for="destination_84" class="instrument-picker-label">Locris Ozolia</label>

		<input type="radio" value="0" name="city" id="destination_33">
		<label for="destination_33" class="instrument-picker-label">Macedonia</label>

		<input type="radio" value="0" name="city" id="destination_44">
		<label for="destination_44" class="instrument-picker-label">Magnesia-ad-Sipylum</label>

		<input type="radio" value="0" name="city" id="destination_70">
		<label for="destination_70" class="instrument-picker-label">Mantineia</label>

		<input type="radio" value="0" name="city" id="destination_58">
		<label for="destination_58" class="instrument-picker-label">Matauria</label>

		<input type="radio" value="0" name="city" id="destination_17">
		<label for="destination_17" class="instrument-picker-label">Megara</label>

		<input type="radio" value="0" name="city" id="destination_1">
		<label for="destination_1" class="instrument-picker-label">Melos</label>

		<input type="radio" value="0" name="city" id="destination_49">
		<label for="destination_49" class="instrument-picker-label">Messena</label>

		<input type="radio" value="0" name="city" id="destination_45">
		<label for="destination_45" class="instrument-picker-label">Methymna</label>

		<input type="radio" value="0" name="city" id="destination_9">
		<label for="destination_9" class="instrument-picker-label">Miletus</label>

		<input type="radio" value="0" name="city" id="destination_8">
		<label for="destination_8" class="instrument-picker-label">Mytilene</label>

		<input type="radio" value="0" name="city" id="destination_27">
		<label for="destination_27" class="instrument-picker-label">Nemea</label>

		<input type="radio" value="0" name="city" id="destination_87">
		<label for="destination_87" class="instrument-picker-label">Olympia</label>

		<input type="radio" value="0" name="city" id="destination_83">
		<label for="destination_83" class="instrument-picker-label">Pallantion</label>

		<input type="radio" value="0" name="city" id="destination_39">
		<label for="destination_39" class="instrument-picker-label">Paros</label>

		<input type="radio" value="0" name="city" id="destination_71">
		<label for="destination_71" class="instrument-picker-label">Pellene</label>

		<input type="radio" value="0" name="city" id="destination_85">
		<label for="destination_85" class="instrument-picker-label">Persia</label>

		<input type="radio" value="0" name="city" id="destination_80">
		<label for="destination_80" class="instrument-picker-label">Pharsalos</label>

		<input type="radio" value="0" name="city" id="destination_55">
		<label for="destination_55" class="instrument-picker-label">Phleious</label>

		<input type="radio" value="0" name="city" id="destination_90">
		<label for="destination_90" class="instrument-picker-label">Pyrrha</label>

		<input type="radio" value="0" name="city" id="destination_15">
		<label for="destination_15" class="instrument-picker-label">Rhegium</label>

		<input type="radio" value="0" name="city" id="destination_61">
		<label for="destination_61" class="instrument-picker-label">Rhodes</label>

		<input type="radio" value="0" name="city" id="destination_82">
		<label for="destination_82" class="instrument-picker-label">Salamis</label>

		<input type="radio" value="0" name="city" id="destination_41">
		<label for="destination_41" class="instrument-picker-label">Samos</label>

		<input type="radio" value="0" name="city" id="destination_94">
		<label for="destination_94" class="instrument-picker-label">Sanctuary of Poseidon Petraios</label>

		<input type="radio" value="0" name="city" id="destination_43">
		<label for="destination_43" class="instrument-picker-label">Sardis</label>

		<input type="radio" value="0" name="city" id="destination_12">
		<label for="destination_12" class="instrument-picker-label">Selinus</label>

		<input type="radio" value="0" name="city" id="destination_22">
		<label for="destination_22" class="instrument-picker-label">Selymbria</label>

		<input type="radio" value="0" name="city" id="destination_68">
		<label for="destination_68" class="instrument-picker-label">Sicily</label>

		<input type="radio" value="0" name="city" id="destination_13">
		<label for="destination_13" class="instrument-picker-label">Sicyon</label>

		<input type="radio" value="0" name="city" id="destination_67">
		<label for="destination_67" class="instrument-picker-label">Siris</label>

		<input type="radio" value="0" name="city" id="destination_36">
		<label for="destination_36" class="instrument-picker-label">Smyrna</label>

		<input type="radio" value="0" name="city" id="destination_63">
		<label for="destination_63" class="instrument-picker-label">Soli (Cyprus)</label>

		<input type="radio" value="0" name="city" id="destination_26">
		<label for="destination_26" class="instrument-picker-label">Soli (Soloi/Pompeiopolis)</label>

		<input type="radio" value="0" name="city" id="destination_10">
		<label for="destination_10" class="instrument-picker-label">Sparta</label>

		<input type="radio" value="0" name="city" id="destination_18">
		<label for="destination_18" class="instrument-picker-label">Syracuse</label>

		<input type="radio" value="0" name="city" id="destination_69">
		<label for="destination_69" class="instrument-picker-label">Tainaron</label>

		<input type="radio" value="0" name="city" id="destination_57">
		<label for="destination_57" class="instrument-picker-label">Tanagra</label>

		<input type="radio" value="0" name="city" id="destination_19">
		<label for="destination_19" class="instrument-picker-label">Tarentum</label>

		<input type="radio" value="0" name="city" id="destination_42">
		<label for="destination_42" class="instrument-picker-label">Teos</label>

		<input type="radio" value="0" name="city" id="destination_40">
		<label for="destination_40" class="instrument-picker-label">Thasos</label>

		<input type="radio" value="0" name="city" id="destination_3">
		<label for="destination_3" class="instrument-picker-label">Thebes</label>

		<input type="radio" value="0" name="city" id="destination_76">
		<label for="destination_76" class="instrument-picker-label">Thespiai</label>

		<input type="radio" value="0" name="city" id="destination_34">
		<label for="destination_34" class="instrument-picker-label">Thessaly</label>

		<input type="radio" value="0" name="city" id="destination_72">
		<label for="destination_72" class="instrument-picker-label">Thurii</label>

		<input type="radio" value="0" name="city" id="destination_249">
		<label for="destination_249" class="instrument-picker-label">Tripodiskos</label>
      </fieldset>
    </div>
    
    <div class="buttonContainer" style="background: rgba(255,255,255,0);">            
      <fieldset style="border: none;" id="genreForm" class="genreForm">
        <div style="color:black;padding-right:5px;display: inline-block;margin-top: 3px; font-weight: bold;" >GEOGRAPHICAL REGION (<span style="color: #fc1804;">to</span>/<span style="color: #551A8B;">from</span>): </div>

        <input type="radio" value="0" name="city" id="region_1">
        <label for="region_1" class="genre-picker-label">Magna Graecia</label>

		<input type="radio" value="0" name="city" id="region_2">
        <label for="region_2" class="genre-picker-label">Mainland Greece</label>
	
        <input type="radio" value="0" name="city" id="region_3">
        <label for="region_3" class="genre-picker-label">Aegean Islands</label>
		
        <input type="radio" value="0" name="city" id="region_4">
        <label for="region_4" class="genre-picker-label">Asia Minor</label>		
	
      </fieldset>
    </div>
	
    <div class="buttonContainer" style="background: rgba(255,255,255,0); height: 100px;">            
      <fieldset style="border: none;" id="genreForm" class="genreForm">
        <div style="color:black;padding-right:5px;display: inline-block;margin-top: 3px; font-weight: bold;" >SMALL GEOGRAPHICAL REGION (<span style="color: #fc1804;">to</span>/<span style="color: #551A8B;">from</span>): </div>

		<input type="radio" value="0" name="city" id="small_region_2">
        <label for="small_region_2" class="genre-picker-label">Attica</label>
	
        <input type="radio" value="0" name="city" id="small_region_3">
        <label for="small_region_3" class="genre-picker-label">Boeotia</label>
		
        <input type="radio" value="0" name="city" id="small_region_4">
        <label for="small_region_4" class="genre-picker-label">Central Greece</label>
		
        <input type="radio" value="0" name="city" id="small_region_17">
        <label for="small_region_17" class="genre-picker-label">Crete</label>
		
        <input type="radio" value="0" name="city" id="small_region_1">
        <label for="small_region_1" class="genre-picker-label">Cyclades & western Aegean Islands</label>
		
        <input type="radio" value="0" name="city" id="small_region_18">
        <label for="small_region_18" class="genre-picker-label">Cyprus</label>	
		
		<input type="radio" value="0" name="city" id="small_region_15">
        <label for="small_region_15" class="genre-picker-label">Dodecanese</label>
		
        <input type="radio" value="0" name="city" id="small_region_19">
        <label for="small_region_19" class="genre-picker-label">Ionian Sea</label>
		
        <input type="radio" value="0" name="city" id="small_region_14">
        <label for="small_region_14" class="genre-picker-label">Lydia</label>
		
		<input type="radio" value="0" name="city" id="small_region_11">
        <label for="small_region_11" class="genre-picker-label">Northern Greece</label>
		
        <input type="radio" value="0" name="city" id="small_region_8">
        <label for="small_region_8" class="genre-picker-label">North-eastern Aegean</label>

        <input type="radio" value="0" name="city" id="small_region_9">
        <label for="small_region_9" class="genre-picker-label">Peloponnese</label>

		<input type="radio" value="0" name="city" id="small_region_7">
        <label for="small_region_7" class="genre-picker-label">Sicily</label>
	
        <input type="radio" value="0" name="city" id="small_region_12">
        <label for="small_region_12" class="genre-picker-label">Thessaly</label>
		
      </fieldset>
    </div>
	
    <div class="buttonContainer" style="background: rgba(255,255,255,0);">            
      <fieldset style="border: none;" id="genreForm" class="genreForm">
        <div style="color:black;padding-right:5px;display: inline-block;margin-top: 3px; font-weight: bold;" >POLITICAL SYSTEM (<span style="color: #fc1804;">to</span>/<span style="color: #551A8B;">from</span>/<span style="color: #ffbf00;">within</span>): </div>

        <input type="radio" value="0" name="city" id="gov_3">
        <label for="gov_3" class="genre-picker-label">Democracy</label>

		<input type="radio" value="0" name="city" id="gov_4">
        <label for="gov_4" class="genre-picker-label">Kingship</label>
	
        <input type="radio" value="0" name="city" id="gov_7">
        <label for="gov_7" class="genre-picker-label">Mixed</label>
		
        <input type="radio" value="0" name="city" id="gov_1">
        <label for="gov_1" class="genre-picker-label">Oligarchy</label>
		
        <input type="radio" value="0" name="city" id="gov_2">
        <label for="gov_2" class="genre-picker-label">Tyranny</label>		
	
      </fieldset>
    </div></div>
	
    <div style="width: 320px; margin: 0 auto; margin-top: 2px" id="slider"></div>
    
  </div>
  <!-- end of control div -->
  
  <div id="attribution" class="attribution" style="position: absolute; bottom: 0; left: 200px;">
	<span style="color: white; text-shadow: -1px 0 grey, 0 1px grey, 1px 0 grey, 0 -1px grey;"><i>Mapping Greek Lyric: Places, Travel, Geographical Imaginary.</i> D. Driscoll, I. McMullin, S. Sansom, A.-E. Peponi.</span>
  </div>

  <a href="bubblemap.html">
	  <div id="home" class="home">
	  </div>
  </a> 
    
    <!-- include google maps library *before* load cartodb.js -->
    <script src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>
    <!-- include cartodb.js library -->
    <script src="http://libs.cartocdn.com/cartodb.js/v3/cartodb.uncompressed.js"></script>
	
    <script src="jquery-1.11.2.js"></script>
    <script src="jquery-ui.js"></script>
    <script src="jQRangeSlider-withRuler-min.js"></script>
	<script src="lyric_mapping.js" type="text/javascript"></script>
	
    <script>
    //<!--
      $("#slider").rangeSlider({
        bounds:{min: -800, max: -400},
		defaultValues:{min: -800, max: -400},
		range: {min: 25},  
		step: 50,
		arrows: false,
		formatter:function(val){
			  var value = -val;
			  return value.toString() + " BCE";
		},
		scales: [
		// Primary scale
		{
		  first: function(val){ return val; },
		  next: function(val){ return val + 50; },
		  stop: function(val){ return false; },
		  label: function(val){ return -val; },
		  format: function(tickContainer, tickStart, tickEnd){ 
		  tickContainer.addClass("myCustomClass");
		  }
		}]
	  });
    //-->
    </script>  

    <script>

	function updateQuery(vis, layers) {

	  var firstCall = true;
	  var govCall = false;
	  var dateFirstCall;
	  var i = 0;
	  var query1;
	  var query2;
	  var sublayer1 = layers[1].getSubLayer(0);
	  var sublayer2 = layers[1].getSubLayer(1);
	  var css1;
	  var css2;
	  var lineSize = "small";
          
	  sublayer1.setInteraction(true);
	    
	    // choose query for lines data
		query1 = "SELECT city_city_lines.*, s.birth_city_governmentid, s.other_city_governmentid, s.count, s.poets_names, s.poets_info, s.poets_birth_sources, s.poets_other_sources, s.travel_direction, s.dotted, s.birth_big_regionid, s.other_big_regionid FROM city_city_lines JOIN ( SELECT s.birth_cityid, s.other_cityid, s.dotted, min(s.birth_big_regionid) as birth_big_regionid, min(s.other_big_regionid) as other_big_regionid, ";

		firstCall = true;
		for (i=1; i<=150; i++) {
		  if($('#region_'+i).is(':checked')) {
			firstCall = false;
			query1 = query1 + "case when min(s.birth_big_regionid) = " + i + " and min(s.other_big_regionid) = " + i + " then 2 when min(s.birth_big_regionid) = " + i + " and (min(s.other_big_regionid) != " + i + " or min(s.other_big_regionid) is null) then 1 when (min(s.birth_big_regionid) != " + i + " or min(s.birth_big_regionid) is null) and min(s.other_big_regionid) = " + i + " then 2 end as travel_direction, ";
		  }
		  if($('#small_region_'+i).is(':checked')) {
			firstCall = false;
			query1 = query1 + "case when min(s.birth_regionid) = " + i + " and min(s.other_regionid) = " + i + " then 2 when min(s.birth_regionid) = " + i + " and (min(s.other_regionid) != " + i + " or min(s.other_regionid) is null) then 1 when (min(s.birth_regionid) != " + i + " or min(s.birth_regionid) is null) and min(s.other_regionid) = " + i + " then 2 end as travel_direction, ";
		  }
		  if($('#destination_'+i).is(':checked')) {
			firstCall = false;
			query1 = query1 + "case when min(s.birth_cityid) = " + i + " and min(s.other_cityid) = " + i + " then 2 when min(s.birth_cityid) = " + i + " and (min(s.other_cityid) != " + i + " or min(s.other_cityid) is null) then 1 when (min(s.birth_cityid) != " + i + " or min(s.birth_cityid) is null) and min(s.other_cityid) = " + i + " then 2 end as travel_direction, ";
		  }
		  if($('#gov_'+i).is(':checked')) {
			firstCall = false;
			query1 = query1 + "case when min(s.birth_city_governmentid) = " + i + " and min(s.other_city_governmentid) = " + i + " then 3 when min(s.birth_city_governmentid) = " + i + " and (min(s.other_city_governmentid) != " + i + " or min(s.other_city_governmentid) is null) then 1 when (min(s.birth_city_governmentid) != " + i + " or min(s.birth_city_governmentid) is null) and min(s.other_city_governmentid) = " + i + " then 2 end as travel_direction, ";
		  }
		}
		if (firstCall == true) {
		  query1 = query1 + "2 as travel_direction, ";
		}

		query1 = query1 + "Min(s.birth_city_governmentid) AS birth_city_governmentid, Min(s.other_city_governmentid) AS other_city_governmentid, Count(s.poetid) AS count, (string_agg('<span style=\"color:#B81609\">' || s.poets_cities_rank || '</span>. ' || s.poet_name , ', ' order BY s.poets_cities_rank)) AS poets_names, (string_agg('<p><span style=\"color:#B81609\">' || s.poets_cities_rank || '</span>. ' || s.poet_name ";
		for(i=1; i<=10; i++) {
		    if($('#gov_'+i).is(':checked')) {
			  query1 = query1 + " || '<br>Governments (data from Hansen and Nielsen): ' || s.grouped_government ";
			}
		}
		query1 = query1 + " || '<br>Dates: ' || s.date_names ";
		
		govCall = false;
		for(i=1; i<=10; i++) {
		    if($('#gov_'+i).is(':checked')) {
			  govCall = true;
			}
		}
		if(govCall == false) query1 = query1 + " || '<br>Genre(s): ' || s.genre_names || '<br>Source(s): ' || s.sources ";
		query1 = query1 + " , '</p>' ORDER BY s.poets_cities_rank)) AS poets_info, (string_agg('<p><span style=\"color:#B81609\">' || s.poets_cities_rank || '</span>. ' || s.poet_name || '<br>' || s.birth_source_citation || ': \"' || s.birth_source_translation || '\" \(trans. ' || s.birth_source_translator || '\)<br>' || s.birth_source_greektext , '</p>' ORDER BY s.poets_cities_rank)) AS poets_birth_sources, (string_agg('<p><span style=\"color:#B81609\">' || s.poets_cities_rank || '</span>. ' || s.poet_name || '<br>' || s.other_source_citation || ': \"' || s.other_source_translation || '\" \(trans. ' || s.other_source_translator || '\)<br>' || s.other_source_greektext , '</p>' ORDER BY s.poets_cities_rank)) AS poets_other_sources FROM ( SELECT birth_cityid, other_cityid, dotted, birth_regionid, other_regionid, birth_big_regionid, other_big_regionid, poetid, poet_name, date_names, sources, birth_source_citation, birth_source_explicit, birth_source_greektext, birth_source_notes, birth_source_translation, birth_source_translator, birth_source_work, other_source_citation, other_source_explicit, other_source_greektext, other_source_notes, other_source_translation, other_source_translator, other_source_work, COALESCE(instrument_names, 'Unknown') AS instrument_names, COALESCE(genre_names, 'Unknown') AS genre_names, string_agg(birth_city_government || '<nobr>-></nobr>' || other_city_government, ', ') AS grouped_government, ";
		
		// democracy
		if($('#gov_3').is(':checked')) query1 = query1 + "case min(p.birth_city_governmentid) when 10 then 3 else min(p.birth_city_governmentid) end as birth_city_governmentid, case min(p.other_city_governmentid) when 10 then 3 else min(p.other_city_governmentid) end as other_city_governmentid, ";
		// oligarchy
		else if($('#gov_1').is(':checked')) query1 = query1 + "case min(p.birth_city_governmentid) when 10 then 1 when 9 then 1 else min(p.birth_city_governmentid) end as birth_city_governmentid, case min(p.other_city_governmentid) when 10 then 1 when 9 then 1 else min(p.other_city_governmentid) end as other_city_governmentid, ";
		// tyranny
		else if($('#gov_2').is(':checked')) query1 = query1 + "case min(p.birth_city_governmentid) when 9 then 2 else min(p.birth_city_governmentid) end as birth_city_governmentid, case min(p.other_city_governmentid) when 9 then 2 else min(p.other_city_governmentid) end as other_city_governmentid, ";		
		else query1 = query1 + "Min(p.birth_city_governmentid) AS birth_city_governmentid, Min(p.other_city_governmentid) AS other_city_governmentid, ";
		
		query1 = query1 + "rank() OVER (partition BY p.birth_cityid, p.other_cityid ORDER BY p.poet_name ASC) AS poets_cities_rank FROM ( SELECT DISTINCT poets_lines.* ";

		query1 = query1 + " FROM poets_lines, dates WHERE ";
	    firstCall = true;
	    for (i=1; i <= 300; i++) {		
		    if($('#poet_'+i).is(':checked')) {
			  query1 = query1 + " poets_lines.poetid = " + i + " and ";
			  lineSize = "medium";
			}
		    if($('#destination_'+i).is(':checked')) {
			  query1 = query1 + " (poets_lines.other_cityid = " + i + " OR poets_lines.birth_cityid = " + i + ") and ";
			  lineSize = "big";
		    }
		    if($('#small_region_'+i).is(':checked')) {
			  query1 = query1 + " (poets_lines.birth_regionid = " + i + " OR poets_lines.other_regionid = " + i + ") and ";
			  if(i != 9) lineSize = "medium";
		    }
		    if($('#region_'+i).is(':checked')) {
			  query1 = query1 + " (poets_lines.birth_big_regionid = " + i + " OR poets_lines.other_big_regionid = " + i + ") and ";
		    }
		    if($('#gov_'+i).is(':checked')) {
			  query1 = query1 + " (poets_lines.other_city_governmentid = " + i + " OR poets_lines.birth_city_governmentid = " + i + " ";

			  //democracy
			  if($('#gov_3').is(':checked')) query1 = query1 + "or poets_lines.other_city_governmentid = 10 OR poets_lines.birth_city_governmentid = 10 ";
			  // oligarchy
			  if($('#gov_1').is(':checked')) query1 = query1 + "or poets_lines.other_city_governmentid = 10 OR poets_lines.birth_city_governmentid = 10 or poets_lines.other_city_governmentid = 9 OR poets_lines.birth_city_governmentid = 9 ";
			  // tyranny
			  if($('#gov_2').is(':checked')) query1 = query1 + "or poets_lines.other_city_governmentid = 9 OR poets_lines.birth_city_governmentid = 9 ";					
			  query1 = query1 + ") and";			
		    }
	    }
		query1 = query1 + " poets_lines.poetid = dates.poetid AND (dates.date <= " + -$("#slider").rangeSlider("values").min + " AND dates.date >= " + -$("#slider").rangeSlider("values").max;
		query1 = query1 + ") ) p GROUP BY birth_cityid, other_cityid, birth_regionid, other_regionid, birth_big_regionid, other_big_regionid, poetid, poet_name, date_names, instrument_names, sources, dotted, genre_names, birth_source_citation, birth_source_explicit, birth_source_greektext, birth_source_notes, birth_source_translation, birth_source_translator, birth_source_work, other_source_citation, other_source_explicit, other_source_greektext, other_source_notes, other_source_translation, other_source_translator, other_source_work) s GROUP BY s.birth_cityid, s.other_cityid, s.dotted ) s ON city_city_lines.birth_cityid = s.birth_cityid AND city_city_lines.other_cityid = s.other_cityid ";

		if(lineSize == "small") {
		  css1 = "#poets_lines { ::hover { line-width: 10; line-opacity: 0; } ::visible { [count<=4] { line-width: 4; } [count<=3] { line-width: 3; } [count<=2] { line-width: 2; } [count<=1] { line-width: 1; [travel_direction = 3] { line-width: 3 } } [dotted=1] { line-dasharray: 10, 4; } line-opacity: 1.0; marker-file: url('http://web.stanford.edu/group/lyricmapping/arrow-16.svg'); marker-width: 5; marker-placement: point; marker-allow-overlap: true; marker-transform: rotate([arrow_angle]+90, 0, 0); [travel_direction = 1] { line-color: #551A8B; marker-fill: #551A8B; } [travel_direction = 2] { line-color: #fc1804; marker-fill: #fc1804; } [travel_direction = 3] { line-color: #ffbf00; marker-fill: #ffbf00; } } } ";
		}
		else if(lineSize == "big") {
		  css1 = "#poets_lines { ::hover { line-width: 10; line-opacity: 0; } ::visible { [count<=4] { line-width: 12; } [count<=3] { line-width: 9; } [count<=2] { line-width: 6; } [count<=1] { line-width: 3; } [dotted=1] { line-dasharray: 10, 4; } line-opacity: 1.0; marker-file: url('http://web.stanford.edu/group/lyricmapping/arrow-16.svg'); marker-width: 10; marker-placement: point; marker-allow-overlap: true; marker-transform: rotate([arrow_angle]+90, 0, 0); [travel_direction = 1] { line-color: #551A8B; marker-fill: #551A8B; } [travel_direction = 2] { line-color: #fc1804; marker-fill: #fc1804; } [travel_direction = 3] { line-color: #ffbf00; marker-fill: #ffbf00; } } } ";		  
		}
		else {
			css1 = "#poets_lines { ::hover { line-width: 10; line-opacity: 0; } ::visible { [count<=4] { line-width: 8; } [count<=3] { line-width: 6; } [count<=2] { line-width: 4; } [count<=1] { line-width: 2; } [dotted=1] { line-dasharray: 10, 4; } line-opacity: 1.0; marker-file: url('http://web.stanford.edu/group/lyricmapping/arrow-16.svg'); marker-width: 10; marker-placement: point; marker-allow-overlap: true; marker-transform: rotate([arrow_angle]+90, 0, 0); [travel_direction = 1] { line-color: #551A8B; marker-fill: #551A8B; } [travel_direction = 2] { line-color: #fc1804; marker-fill: #fc1804; } [travel_direction = 3] { line-color: #ffbf00; marker-fill: #ffbf00; } } } ";
		}
		
		console.log(query1);
		console.log(css1);
	    sublayer1.setSQL(query1);
		sublayer1.setCartoCSS(css1);
		
	    // choose query for cities data
	    query2 = "SELECT c.* FROM cities as c, (" + query1 + ") selected_lines where (c.cityid = selected_lines.birth_cityid or c.cityid = selected_lines.other_cityid) ";
		for(i=1; i <= 4; i++) {
		  if($('#region_'+i).is(':checked')) query2 = query2 + " and (selected_lines.birth_big_regionid = " + i + " or selected_lines.other_big_regionid = " + i + ")";
		}
		 
	    console.log(query2);
	    sublayer2.setSQL(query2); 	  
	}

//	  }
	
    function createSelector(vis, layers) {
        var sql = new cartodb.SQL({ user: 'greeklyricpoets' });
        var $options = $('#controlbar input');
		
		$options.click(function(e) {
			updateQuery(vis, layers);		  
		  });
		$("#slider").bind("valuesChanged", function(e, data) {
		  updateQuery(vis, layers);
		});
    }

	  function createTotalPoetsQuery() {
		var query = [
			"SELECT ",
			"	cities.cartodb_id, ",
			"	cities.the_geom, ",
			"	cities.the_geom_webmercator, ",
			"	cities.city_name, ",
			"	cities.government, ",
			"	sorted_poets.cityid, ",
			"	COUNT(sorted_poets.cityid) as selected_number, ",
			"	string_agg(sorted_poets.poet_name, ', ') as selected_names, ",
			"   	string_agg(sorted_poets.sources, ', ') as selected_sources, ",
			"	string_agg(sorted_poets.poet_link, ', ') as selected_links ",
			"FROM cities, ",
			"	(SELECT ",
			"		poets.poetid, ",
			"		poets.poet_name, ",
			"		poets.sources, ",
			"		poets.poet_link, ",
			"		poets_cities.cityid ",
			"		FROM poets, poets_cities ",
			"		WHERE poets.poetid = poets_cities.poetid ",
			"		ORDER BY cityid ASC, poet_name ASC) sorted_poets ",
			"WHERE cities.cityid = sorted_poets.cityid ",
			"GROUP BY sorted_poets.cityid, cities.the_geom, cities.the_geom_webmercator, cities.city_name, cities.cartodb_id"
		].join("");
		return query;
	}

	  function createBubbleVisualization(selectedData) {
		var bubble =
			['#cities{',
			  'marker-fill: #B81609;',
			  'marker-line-color: #FFF;',
			  'marker-line-width: 2;',
			  'marker-line-opacity: 1;',
			  'marker-opacity: 0.9;',
			  'marker-placement: point;',
			  'marker-type: ellipse;',
			  'marker-allow-overlap: true;',
			  'marker-clip: false;',
			  'marker-multi-policy: largest;',
			  'marker-width: 5.0;',
			'}',
/*			'#cities::labels ', 
			'[',selectedData,'>=8][zoom>5], ',
			'[',selectedData,'>=2][zoom>6], ',
			'[',selectedData,'>=1][zoom>7] ', 
			'{',
			'  text-name: [city_name];',
			'  text-face-name: "Open Sans Regular";',
			'  text-size: 15;',
			'  text-fill: #000;',
			'  text-allow-overlap: true;',
			'  text-halo-fill: #FFF;',
			'  text-halo-radius: 1;',
			'  text-placement-type: simple;',
			'  text-placements: "N,S,E,W,NE,SE,NW,SW,16,14,12";',
			'  text-dy: 3;',
			'  text-dx: 3;',
			'}',  */
			].join('');
		return bubble;
		}
	
      
      function getParameterByName(name) {
	  name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
	  var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
	      results = regex.exec(location.search);
	  return results == null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
      }      
	  
      function main() {
        cartodb.createVis('map', 'https://greeklyricpoets.cartodb.com/api/v2/viz/08fed7e4-8e49-11e5-b2ed-0e31c9be1b51/viz.json', {
          tiles_loader: true,
          center_lat: 38.9,
          center_lon: 26.38,
          zoom: 6
        })
        .done(function(vis, layers) {
	  // layer 0 is the base layer, layer 1 is cartodb layer
	  
	  // change attribution to us
	  var map = vis.getNativeMap();
	  map.attributionControl.removeAttribution(layers[0].getAttribution());
	  map.attributionControl.removeAttribution(layers[1].getAttribution());

	  var sublayer = layers[1].getSubLayer(0);
	  var sublayer2;
	  var poetid = getParameterByName("poetid");
	  var query = "select * from cities where cityid = 0";
	  var css = createBubbleVisualization("selected_number");

	  layers[1].setQuery("select *, '' as poets_names, '' as poets_info, '' as poets_birth_sources, '' as poets_other_sources, 1 as count from city_city_lines");
	  layers[1].setCartoCSS("/** color visualization */ #poets_lines { ::hover { line-width: 10; line-opacity: 0; } ::visible {   [count<=4] { line-width: 4; } [count<=3] { line-width: 3; } [count<=2] { line-width: 2; } [count<=1] { line-width: 1; } line-opacity: 0.7; line-color: #fc1804; marker-fill: #fc1804; marker-file: url('http://web.stanford.edu/group/lyricmapping/arrow-16.svg'); marker-width: 5; marker-placement: point; marker-transform: rotate([arrow_angle]+90, 0, 0); } }");
	  sublayer.setInteraction(false);
	  
	  layers[1].createSubLayer({sql: query, cartocss: css } );
	  	  
	  createSelector(vis, layers);
        })
        .error(function(err) {
          console.log(err);
        });
      }

      window.onload = main;
    </script>
    
	<script>
	  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
	
	  ga('create', 'UA-66510812-1', 'auto');
	  ga('send', 'pageview');
	
	</script>
  </body>
</html>